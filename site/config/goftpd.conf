# var allow you to set vars, vars cant be used within vars
var defaults *
var admin =admin

# path to where the authentication db will be stored
auth db site/config/auth.db
# the name of the group that when added to will
# give users admin abilities. think +1
auth admin_group siteops

acl download 	/* 		$defaults
acl delete /** *
acl download 	/foo/* !*
acl upload 		/** 	-admin
acl resume 		/* 		$defaults
acl hide_user 	/*		!-admin $defaults
acl hide_group	/*		!-admin $defaults
acl makedir		/*		$defaults
acl private /foo -admin
acl private /foo/** -admin

# server settings
server sitename_short 	go
server sitename_long 	goftpd
server host				::
server port				2121
# range of passive ports allowed  to be used
server passive_ports	1000 5000
# used for pasv
server public_ip		127.0.0.1
# if set to true certs will be autogenerated
server tls_autogen true
# required unless tls_autogen
server tls_cert_file	site/config/cert.pem
server tls_key_file		site/config/key.pem

# fs settings
# -----------
fs rootpath			site/data
# optional path where shadow fs database will be kept
fs shadow_db		site/config/shadow.db
# default_* if user or group isnt found in shadowdb or 
# permissions are to hide user/group use this user/group
fs default_user		nobody
fs default_group	ohhai

# regexp. hide these from listing and prevent from being downloaded
fs hide (?i)\.(message)$


# script settings
# ---------------
script pre LIST trigger site/scripts/pre_list.lua *

# commands
# event commands are disabled for the time being
# script post "PASS" event site/scripts/post_pass.lua *

# glftpd commands
# scripts have to have an explicit match otherwise they fall through, this allows flags
# like 'self' and 'gadmin' to work. tl;dr always add !* if you want to default deny or use variables
# like here
var authorised -io =admin gadmin
var only_authorised -io =admin gadmin !*

script command "SITE ADDUSER"		trigger site/scripts/site/adduser.lua 	$only_authorised
script command "SITE USER"		trigger site/scripts/site/user.lua 	$authorised self
script command "SITE DELUSER"	trigger site/scripts/site/deluser.lua 	$authorised self
script command "SITE READD"	trigger site/scripts/site/readd.lua 	$authorised
script command "SITE ADDIP"		trigger site/scripts/site/addip.lua 	$only_authorised
script command "SITE DELIP"		trigger site/scripts/site/delip.lua 	$authorised self
